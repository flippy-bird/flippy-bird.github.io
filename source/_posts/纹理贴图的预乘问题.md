---
title: 纹理贴图预乘问题
date: 2021-11-17 22:59:59
tags: "bug"
categories: "OpenGL"
description: 记录一个使用OpenGL在融合alpha通道时的问题
cover: /covers/5.png
---


## 纹理贴图预乘问题

<!-- more -->

### 现象	

在一次opengl**纹理贴图贴PNG图片**的过程中，我遇到了下面的问题，结果如下图：

![image](https://raw.githubusercontent.com/nashpan/image-hosting/main/markdown_image/image.1g4g07fkd2rk.png) 

​	可以发现，贴图的边界存在一些白色的点，非常影响最后的效果。一开始，我以为是没有开mimmap的原因，因为我发现我使用的贴图的精度很高(2560 * 2560),但是并不是，我已经开启mimmap，仍然有白点的存在。我想了很久，一直以为是锯齿或者其它原因，各种RenderDoc，matlab实验，仍没有解决问题，后面在矿哥的帮助下，一秒解决了问题，真大神呀。

### **Solution**

出现上面的问题不是锯齿的问题，而是alpha blend的问题，上面那张wolf图像的精度是2560 * 2560，进行贴图时会进行缩放，这时会产生一些问题，具体的文章解释见下面的文章解释

> [Alpha Blending: To Pre or Not To Pre](https://developer.nvidia.com/content/alpha-blending-pre-or-not-pre)
>
> [[图片Alpha预乘的作用](https://www.cnblogs.com/xiaonanxia/p/9448444.html)]

具体的处理代码

<img src="https://raw.githubusercontent.com/nashpan/image-hosting/main/markdown_image/alpha_premultiple.png" alt="alpha_premultiple" style="zoom: 80%;" /> 

预乘之后问题就解决了，结果如下：

![image](https://raw.githubusercontent.com/nashpan/image-hosting/main/markdown_image/image.sfg8evv0xvk.png) 



