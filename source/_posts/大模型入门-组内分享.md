---
title: 大模型入门(组内分享)
date: 2025-6-24 21:01:18
description: 组内LLM分享，从基础到入门
cover: /covers/0.png
tags:
    - LLM
    - Agent
---

## 背景

     2025年开年以来，大家或多或少都听过下面这些词：deepseek， AI， 人工智能，Agent，具身智能；

AI到底发展到哪一步了，利用AI可以做哪些事情，或者作为技术人员，想要使用AI做一些事情，应该学习那些东西，这篇将和大家一起探讨下。

备注声明：**该分享定位轻科普向**，不会涉及大模型相关的底层原理，有些结论属于个人的理解和感悟，如需要深入交流，欢迎大家和我深入探讨。

## 大模型相关应用

### **Prompt Engineer(提示词)**

**Prompt 咒语 ----> 激发LLM的潜能**

2023年的某一天，当你开始和ChatGpt互动的那一刻开始，你就是一个Prompt Engineer了！  

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=MGIxMzNhZDIyMWY5OWM5ZDExMzA2ZDZmODE2Nzg4YWVfTkk2b1pXcDBCbVdCbUdXa2ZzMDl6T0psM09oa0dIaTFfVG9rZW46RmJiTmIyVjl2b3Nnbmh4SUdpYmNZbjVXblRmXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

当你不断试探GPT，使用各种策略，反问，试探，举个例子等等(专业一点就是few shot, zero-shot, cot等等)，最终得到正确答案时，你其实已经获得了一些prompt Engineer的训练，在下一次的问答中，你就能更快更好地得到你想要的答案；

当然啦，现在大模型也挺多的，确实有一些朴素的咒语框架可以让我们快速得到更好了的回答，你如果想了解一下，可以看看下面这个课程

[(超爽中英!) 2025吴恩达最好的【提示词工程师】教程！附课件代码 DeepLearning.AI_大模型_LLM_Prompt_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1b4A6etEJu/?spm_id_from=333.337.search-card.all.click&vd_source=d46df11a3bf332ea68a6f3b7af79095d)

当然，上面说的咒语是GPT对话形式的，文生图，文生视频等等AIGC的应用，咒语可能需要另外习得(你芝麻开门可以开这个门，另外一个门可就不行了哦)

### SFT(微调)

- 大模型训练的时候使用的是公开的数据集，prompt咒语念得再好，也没办法，巧妇难为无米之炊，对于特定领域的问题大模型会出现幻觉(瞎回答)
- 大模型的效果出现一些问题，需要纠正大模型的错误

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=ZDc4ODQ0YzNlZDNlMTJkYmY3MmUzM2U0OTI3MzA2OGZfdzVnUFRKeW5sdHZDRG9OZkJONlFiUWJIM2RTYXp6QjBfVG9rZW46QkJiVWJTYlhpb0RZZDF4MzRWdWNsNDd4bkx1XzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

- 改变大模型回答的风格等等需要定制，就需要大模型微调

如果大家想要进阶动手微调一下的话，可以使用下面的框架，按照格式准备好数据即可，然后一键启动，上机器开始炼丹即可！

目前主流的微调框架：

1. https://github.com/hiyouga/LLaMA-Factory
2. https://github.com/unslothai/unsloth
3. https://github.com/modelscope/ms-swift

### **RAG**

**RAG = LLM + 外置数据库**

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=NmJhOWRlYmQ0OTNiMzMzOGY2YjdlYjE0ZTM1ODY3NDBfcVFTWERpODZRZzBxWmRaTU1xdDJwaHIweE9kVFNwZXNfVG9rZW46UzI1TGJlMDJPb1Y5bHh4M1JFSmNHNll1bldkXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=NTMxZjhmYmRlZDYzOWMwYTcxNDhlZDhjYjM3ODllNzdfdVZyWmkwU1hDeXBUZGl5U051UlZyZmZjQXJJaDZ3c25fVG9rZW46QlBEUmJTbFFNbzdqVnZ4Sm1WaGNhYzZRbjZlXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

​                                                                   **备注：这部分写于2025年4月16日**

用过GPT的同学可能会了解到，GPT的知识具有时效性，比如GPT-4发布时间在2023年，那么GPT-4绝对无法帮你回答2024年之后的事情；再者，你有一个本地知识库的时候，你需要大模型结合这个知识库来回答你的问题时，你可能就需要RAG了；

右边严格来说不是RAG的流程，但是广义来讲，也算RAG，llm在其中扮演的是嘴替(总结)的作用；左边这个图是标准的RAG的流程，主要包括两个部分：index(入库) 和 query(出库)

如果大家想要深入学习这一部分的话，下面是一些可以进阶的部分：

当前两个主流的RAG搭建框架(RAG企业级开发)：

langchain：https://github.com/langchain-ai/langchain

llamaindex：https://github.com/run-llama/llama_index

可以学习的开源项目：

QAnything: https://github.com/netease-youdao/QAnything

RAGflow：https://github.com/infiniflow/ragflow/blob/main/README_zh.md

关于RAG的优化：[RAG技术](https://quvideo.feishu.cn/docx/EbMAde0dcoBe6ZxjbRecgaQ3ngg)

### Agent

**Agent = LLM + 外部工具**

上面的RAG是LLM和外部的知识(文档，图片等)打通了一条链路，相当于在数据层面建立了联系；但是不具备数据处理的能力，而处理数据的能力，一般是API是通过API的形式来展现的；**因此当LLM能够使用外部的 工具(API), LLM的能力将得到极大的扩展 ，**不多bb，展示！！！

> https://strudel.cc/  (下面Agent使用到的一个音乐工具)

如果没有耐心看完前面Agent执行步骤的话，可直接拉到2：48秒，然后看后面的即可

<video data-lark-video-uri="drivetoken://KSrPbAyRYo98nmx2MYucxGg9nbb" data-lark-video-mime="video/mp4" data-lark-video-size="15891280" data-lark-video-duration="0" data-lark-video-name="test.mp4" data-lark-video-width="1920" data-lark-video-height="1080"></video>

如果给了LLM一台可以运行的电脑(环境)，那么这就是今年3月份爆火的AI智能体 [Manus](https://manus.im/)

为什么要叫Agent呢，可以看下面的图(没找到比较好的图，自己画的，见谅)，我们可以将用户比作boss，llm比作员工，boss发出一个问题之后，llm去规划并完成工作，llm是具体的执行者，因此叫做代理,Agent

暂时无法在飞书文档外展示此内容

目前智能Agent产品设计一般都是按照上面的思路去进行的，规划(Plan) + 执行(ReAct模型)

## Agent

通过上面的章节，对Agent进行了一些初步的了解，这个小节将通过代码进一步的带大家了解Agent相关的内容

### Agent

> [李宏毅讲Agent](https://www.bilibili.com/video/BV1FCR3Y1EnJ/?spm_id_from=333.337.search-card.all.click)

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=YzRmNmM1Y2M0YTJmY2VmMDQ5N2Y4YjBiZGE4MDdkZDZfUzZnOHN3VzFCajRmd2tLajZyTXFvSkNWNEpaRFVYMFRfVG9rZW46TTc2NmJzQmVMb3dyamx4NEhQN2NSVFA3bkFjXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

从上面的一些例子我们可以了解到，对于完成一个人类目标而言，Agent需要两个方面的能力，目标拆解的能力和分布执行的能力；对应的名词即plan和function call，有了分步的任务，之后，LLM Agent逐步分析，调用工具或者自身内部知识，然后将结果传给下一步的任务，如下图所示：

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=NTkyZTU0OTZkMDg5YmUyMmVjZWFmNjkxZWU1OGJmMTBfaW1CUU1iNDBWUUZlU0pITXhUY1pLZWMwMmNrZ25ZTmhfVG9rZW46RWpVRmI3cENEb2cyUnd4NlhKMmNuT0FFbmNlXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

通过上面的方式，可以有哪些运用呢？

1. 用模型训练模型：

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=YjNiZDAwMmI5NDQ5ODFkZGNjMWQxMGRhZTA5MTU3NzJfallCNmE0MldDMnp2aWVEbFJHVFZyVEtNU00zbnBrZDVfVG9rZW46T1ZqbGJZYTFzb3lPRGJ4NUxFb2NJSzAxblJoXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

1. 使用Agent下围棋，使用电脑，浏览网页等等！

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=ZWMzOTA3ZTQ3NTkzN2IyNTg4Y2E3Y2Q2MzAxZWQwMzFfRENLbXpqRHRBTmVTWlBBaGNYZDNlaWtpcUptcjk4bUhfVG9rZW46TWJDVWJoTUk0b2puY0J4MXl2eWNxTk9IbmZkXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

当然上面的例子也说明了，大模型在调用过程中，可能出现幻觉，这有可能导致任务执行的失败，比如上面的deepseek 改变了国际象棋的规则，然后赢得了AI届的国际象棋桂冠！因此对于复杂问题，选择其它方法或许更可靠。这里不再展开。

上面都提到了大模型要实现Agent，需要具备工具调用的能力，这个能力是怎么实现的呢？看图好像挺简单的一句话就说完了，其实实际呢，也挺简单的。下面通过一个Function Call的例子来简单说明一下。

### Function call

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=MzRkNWVhM2VlY2ViZTM2OThjMzMxOTYwNzdkYzA5MDdfbjNEVlpFZXc3M0pFbnJReFIyZXNmUDNzajdFa1BMVU1fVG9rZW46WjJrZmI1UVpqb0NJQmN4c05rSGN6MjFJbjhjXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

调用的实例代码

```python
import random
from datetime import datetime
import json

# step 1: 定义工具
def get_current_time():
    current_datetime = datetime.now()
    formatted_time = current_datetime.strftime('%Y-%m-%d %H:%M:%S')
    return f"当前时间：{formatted_time}。"

def add(arguments):
    a = arguments["num_1"]
    b = arguments["num_2"]
    return f"计算的结果是：{a + b}"

# step 2: 创建tools数组
tools = [
    {
        "type": "function",
        "function": {
            "name": "get_current_time",
            "description": "当你想知道现在的时间时非常有用。",
        }
    },
]

tool_name = [tool["function"]["name"] for tool in tools]

# step 3：使用大模型调用函数
from openai import OpenAI
import os

client = OpenAI(
    api_key="sk-389c222d8f304e6ba3bb10ad3589d340",
    base_url="https://dashscope.aliyuncs.com/compatible-mode/v1",
)

messages = [
    {
        "role": "system",
        "content": """你是一个很有帮助的助手。如果用户提问关于时间的问题，请调用‘get_current_time’函数。
     请以友好的语气回答问题。""",
    },
    {
        "role": "user",
        "content": "现在是几点？"
    }
]

def function_calling():
    completion = client.chat.completions.create(
        model="qwen-max",
        messages=messages,
        tools=tools,
    )
    res = completion.choices[0].message
    print(res.model_dump_json())

    return completion

# step4: 运行工具函数
completion = function_calling()
function_name = completion.choices[0].message.tool_calls[0].function.name
arguments_string = completion.choices[0].message.tool_calls[0].function.arguments

# 使用json模块解析参数字符串
arguments = json.loads(arguments_string)
# 创建一个函数映射表
function_mapper = {
    "get_current_time": get_current_time,
    "add":add
}
# 获取函数实体
function = function_mapper[function_name]
# 如果入参为空，则直接调用函数
if arguments == {}:
    function_output = function()
# 否则，传入参数后调用函数
else:
    function_output = function(arguments)
# 打印工具的输出
print(f"工具函数输出：{function_output}\n")

## step5： 将工具输出添加到messages中，继续进行下面的步骤
messages.append(completion.choices[0].message)
messages.append({"role": "tool", "content": function_output, "tool_call_id": completion.choices[0].message.tool_calls[0].id})
print("已添加tool message\n")

completion = function_calling()
```

### WorkFlow - 编排的Agent

上面提到，对于复杂任务，完全让大模型去规划，去自由探索，可能出现很多不可预知的问题，这对于一些确定性的任务来说，是很致命的，既然这样，那么就别让大模型逞能，脚踏实地，只解决具体的单步问题，规划问题让人类来干就好了，这就是workflow，这就是截止到2025年4月20日来最主流的Agent 实现方式；

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=MTI4YjNlMzcwOThjOWMyNmUyNDZkYWFmNzU2M2U4ZDRfNGZWR3ZLY3JtRmNFWXpxOFV0VU5DSGZ5a3RPdFBZUGJfVG9rZW46WmhBamJVQmhYb2FPd2Z4eHVjTGNYdlpObkFjXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

### MCP

上面是通义千问的Function 调用方式，下次我们再添加一个新的工具的时候，是不是又要重复写一下这个流程(定义工具，定义工具描述，然后传给大模型)， 但是现在大模型这么多，大模型之间的Function Call的方式可能不相同，这里写的工具函数，换到GPT4，可能就要修改代码，这样很不符合程序员的复用规则，因此有了MCP

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=NTQxMDM4YjJhMDMyNGE4Yzg5YTYwY2IxMTc3NjlmMmRfdnhxMUJtNGhKMTBQTVJqQzdTUE1xc2lxeFM4Rk5aVmVfVG9rZW46WmNQS2JxR05Jb3FuTkR4UFgzamNpMGx0bmRjXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=YTZkMmJkMWU3N2NlMTc1NWNiYjEzMDFiNjUwZGNjMjNfRkNxVGc4U0U1a3UySGN2SjVBaTA2Q3RXMGx4QTBGanNfVG9rZW46VWZ5VmJvOU1Rb2lsN3d4SWFwYWNjM29UbmxiXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

MCP其实还是大模型选择需要调用的工具，**因此MCP本质还是Function Call，** 只是统一了一个标准之后，开发者通过MCP协议写的Function可以给别人复用了

如果想深入了解的话，大家可以对照着[官方代码](https://github.com/modelcontextprotocol)写一遍，就会发现了MCP解决的是哪一方面的问题了；

### A2A，ANP等等

[A2A](https://github.com/google/A2A)：谷歌提出来的一种 Agent 和 Agent相互通信的协议， MCP协议统一了大模型与外界工具交互的方式，A2A是Agent与Agent间的，可以类比成公司里面部门，每个部门承担一部功能(如前端，后端，数据，算法，HR，财务，运维等)，然后相互协作，共同达成一个目标；

[ANP](https://github.com/agent-network-protocol/AgentNetworkProtocol)：国内提出的类似于A2A的，用于Agent2Agent的协议，目前是成为互联网界的http

. . . . .

无论是MCP，还是A2A，抑或者是其它协议，我觉得归根到底是今年自deepseek以来，**大模型的能力得到了较大的提升，**这个生态才慢慢火起来(2024年开年火了一阵就没声音了，因为Agent有点人工智障的味道)，至于Agent有多智能，我觉得还是让子弹飞一会儿，但是在小的方面，确实会影响我们的工作效率；恰当的使用llm来协助我们工作，能做到事半功倍；

### 好物推荐

编程工具类：

1. [Cursor](https://www.cursor.com/)  (目前最好的AI代码编辑器，就是有点小贵，我使用的是VScode通义灵码插件替代)
2. [Trae](https://www.cursor.com/) (字节出品， 国产第一个有知名度的AI代码编辑器(当然，投流，广告投入很大))

开发框架类:（还是上面那两个）

langchain：https://github.com/langchain-ai/langchain

llamaindex：https://github.com/run-llama/llama_index  (个人常用这个，教程很友好， 但是目前langchain发展更好一些)

零代码类大模型编排工具(适合AI行业的所有人)

搞过comfyUI的同学应该知道节点编辑工具的概念，这个就是llm这边的节点编辑工具

1. [dify](https://github.com/langgenius/dify) : 企业级的，目前大多数工具开发AI流程应用的首选
2. [n8n](https://github.com/n8n-io/n8n) ：同上，优势在集成了很多的工具
3. [扣子](https://www.coze.cn/home) ： 字节出品，和dify类似

举个dify的例子：

本来想演示一个使用dify搭建小影知识库问答系统的demo，但是貌似飞书文档权限比较严格=_=#，因此这里简单介绍一下；

以翻译的任务举个例子(目前主流翻译的流程)：通过搭积木的方式，20分钟(2分钟搭建，18分钟的提示词) 即可快速完成一个任务的搭建

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=OWNhMzIxZWJhNjYwYjM4ZWQ1YmZmNmYzNjM2NThhZDJfS0Q0YU4zSUN3ZDBVdEloVVNsOE9ES2JUaVNGNEVRcmhfVG9rZW46SkplQmJzak5jb1RYcmF4eVdYZWNoU09Bbm1IXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

另外，比较喜欢的一个功能是不同模型的对比，我觉得在验证阶段很实用

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=YWMzMzFjYTI0YjY3ZWJlYzRiMWZjNjE1NTk3M2M4OGJfR2xyb2lKQlpnR2xTN29vZ3dPZFJoTFVoT0xtcHdBUWpfVG9rZW46STRGWmJKaHFTb0VXaDR4NzQ1WmMweDY1bmFkXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

## 现场演示

### Agent

cline + MCP

MCP发展得如火如荼，开源社区上也有很多好玩的MCP工具了，大家可以尝试一下

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=MzkzYTY3MTQwYTdjYWU5NWY2YTViNGZmOWQ5ZGE5NThfSk9DTlU1b2JYNUxBUDJ1V3VEZjRSNVJ6N25PMmhtR0lfVG9rZW46R0VadWI0SmI5b2E0aHZ4MlFQeWNoNGc1bmVnXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

**想一想：大家现在看到这个热点，大家觉得是通过什么实现的？**

![img](https://quvideo.feishu.cn/space/api/box/stream/download/asynccode/?code=ZTkxODQxZjhjOTEzNDgzNzU3MTgzNjk0YzFjZTc5OTZfWVhIa3Q1ZTgxTzJkRk9sM09pczB5cFY3Y2x3UUlaOXVfVG9rZW46TmJKeWJvWHU0b2RkSFh4V21KZmNha0ZHbkRjXzE3NjQxNjE5NjQ6MTc2NDE2NTU2NF9WNA)

### dify

### ima (好用的结合RAG的文档工具)
