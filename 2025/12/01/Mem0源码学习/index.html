<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mem0源码学习 | 大潘子的文字角落</title><meta name="author" content="Pan"><meta name="copyright" content="Pan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="开源项目Mem0源码学习记录">
<meta property="og:type" content="article">
<meta property="og:title" content="Mem0源码学习">
<meta property="og:url" content="https://flippy-bird.github.io/2025/12/01/Mem0%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="大潘子的文字角落">
<meta property="og:description" content="开源项目Mem0源码学习记录">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://flippy-bird.github.io/covers/18.webp">
<meta property="article:published_time" content="2025-12-01T05:54:24.000Z">
<meta property="article:modified_time" content="2026-01-19T02:53:37.029Z">
<meta property="article:author" content="Pan">
<meta property="article:tag" content="Agent">
<meta property="article:tag" content="memory">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://flippy-bird.github.io/covers/18.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Mem0源码学习",
  "url": "https://flippy-bird.github.io/2025/12/01/Mem0%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/",
  "image": "https://flippy-bird.github.io/covers/18.webp",
  "datePublished": "2025-12-01T05:54:24.000Z",
  "dateModified": "2026-01-19T02:53:37.029Z",
  "author": [
    {
      "@type": "Person",
      "name": "Pan",
      "url": "https://flippy-bird.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favion.png"><link rel="canonical" href="https://flippy-bird.github.io/2025/12/01/Mem0%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=5.5.2"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mem0源码学习',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="preload" as="image" href="/img/fengmian.webp" fetchpriority="high"><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 8.1.1"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">36</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">22</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/covers/18.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">大潘子的文字角落</span></a><a class="nav-page-title" href="/"><span class="site-name">Mem0源码学习</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Mem0源码学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-12-01T05:54:24.000Z" title="发表于 2025-12-01 13:54:24">2025-12-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-01-19T02:53:37.029Z" title="更新于 2026-01-19 10:53:37">2026-01-19</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Agent%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%AD%A6%E4%B9%A0/">Agent开源项目学习</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">2.2k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>10分钟</span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/mem0ai/mem0">https://github.com/mem0ai/mem0</a></p>
</blockquote>
<h3 id="1-项目的核心代码"><a href="#1-项目的核心代码" class="headerlink" title="1. 项目的核心代码"></a>1. 项目的核心代码</h3><p>从memory&#x2F;base.py 里面的基类可以看到，记忆功能主要实现了下面的功能</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MemoryBase</span>(<span class="title class_ inherited__">ABC</span>)</span><br><span class="line"><span class="meta">	@abstractmethod</span></span><br><span class="line">	<span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, memory_id</span>):  <span class="comment"># 根据id获取对应id的memory</span></span><br><span class="line">     </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_all</span>(<span class="params">self</span>):         <span class="comment"># 列出所有的memory</span></span><br><span class="line">        </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update</span>(<span class="params">self, memory_id, data</span>):    <span class="comment"># 更新id的memory</span></span><br><span class="line">        </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">delete</span>(<span class="params">self, memory_id</span>):   <span class="comment"># 删除id的memory</span></span><br><span class="line">        </span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">history</span>(<span class="params">self, memory_id</span>):  <span class="comment"># Get the history of changes for a memory by ID.</span></span><br></pre></td></tr></table></figure>

<p>mem0的核心实现在memory&#x2F;main.py 文件中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span>(<span class="title class_ inherited__">MemoryBase</span>):</span><br><span class="line">	<span class="comment"># 这里除了实现上面base定义的基本功能外，有一个search的核心功能实现</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self, query, ...</span>):  <span class="comment"># 这里会根据用户的query去寻找最相关的memory</span></span><br><span class="line">	</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">AsyncMemory</span>(<span class="title class_ inherited__">MemoryBase</span>):  <span class="comment"># 异步的接口不用再使用另外一个基类，直接使用了MemoryBase，但是在实现时使用了异步</span></span><br><span class="line"> 	<span class="keyword">async</span> <span class="keyword">def</span> <span class="title function_">get</span>(<span class="params">self, memory_id</span>):</span><br></pre></td></tr></table></figure>

<h4 id="1-1-search"><a href="#1-1-search" class="headerlink" title="1.1 search"></a>1.1 search</h4><p>看search里面的实现，就是标准的RAG流程，embedding query, 然后从向量数据库或者图数据库召回，做一个ReRank重排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 是通过下面的函数来实现向量召回的</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_search_vector_store</span>(<span class="params">self, query, filters, limit, threshold: <span class="type">Optional</span>[<span class="built_in">float</span>] = <span class="literal">None</span></span>):</span><br><span class="line">    embeddings = <span class="variable language_">self</span>.embedding_model.embed(query, <span class="string">&quot;search&quot;</span>)</span><br><span class="line">    <span class="comment"># 这一步就是向量检索了</span></span><br><span class="line">    memories = <span class="variable language_">self</span>.vector_store.search(query=query, vectors=embeddings, limit=limit, filters=filters)</span><br><span class="line">	...</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line"> <span class="keyword">def</span> <span class="title function_">search</span>(<span class="params">self, query, ...</span>):</span><br><span class="line">    ...</span><br><span class="line">	<span class="keyword">with</span> concurrent.futures.ThreadPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">        future_memories = executor.submit(<span class="variable language_">self</span>._search_vector_store, query, effective_filters, limit, threshold)</span><br><span class="line">        <span class="comment">## 这里的self.graph就是图关系库</span></span><br><span class="line">        future_graph_entities = (executor.submit(<span class="variable language_">self</span>.graph.search, query, effective_filters, limit) <span class="keyword">if</span> <span class="variable language_">self</span>.enable_graph <span class="keyword">else</span> <span class="literal">None</span>)</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<p>关于Memory类中使用到的LLM，embedding, graph,rerank模型等等都是使用<strong>工厂模式</strong>来初始化的</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Memory</span>(<span class="title class_ inherited__">MemoryBase</span>):</span><br><span class="line">    <span class="variable language_">self</span>.embedding_model = EmbedderFactory.create(</span><br><span class="line">            <span class="variable language_">self</span>.config.embedder.provider,</span><br><span class="line">            <span class="variable language_">self</span>.config.embedder.config,</span><br><span class="line">            <span class="variable language_">self</span>.config.vector_store.config,</span><br><span class="line">        )</span><br><span class="line">    </span><br><span class="line">    <span class="variable language_">self</span>.vector_store = VectorStoreFactory.create(</span><br><span class="line">            <span class="variable language_">self</span>.config.vector_store.provider, <span class="variable language_">self</span>.config.vector_store.config</span><br><span class="line">        )</span><br><span class="line">    <span class="variable language_">self</span>.llm = LlmFactory.create(<span class="variable language_">self</span>.config.llm.provider, <span class="variable language_">self</span>.config.llm.config)</span><br><span class="line">    <span class="keyword">if</span> config.reranker:mem0 源码阅读：一个工程化记忆系统</span><br><span class="line">        <span class="variable language_">self</span>.reranker = RerankerFactory.create(</span><br><span class="line">            config.reranker.provider, </span><br><span class="line">            config.reranker.config</span><br><span class="line">        )</span><br><span class="line">    <span class="keyword">if</span> <span class="variable language_">self</span>.config.graph_store.config:</span><br><span class="line">        provider = <span class="variable language_">self</span>.config.graph_store.provider</span><br><span class="line">        <span class="variable language_">self</span>.graph = GraphStoreFactory.create(provider, <span class="variable language_">self</span>.config)</span><br><span class="line">        <span class="variable language_">self</span>.enable_graph = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="variable language_">self</span>.graph = <span class="literal">None</span></span><br></pre></td></tr></table></figure>

<p>工厂函数里面对应的就是各个可以支持的实现，这个实现是在 mem0&#x2F;utils&#x2F;factory.py 文件中，下面的是图关系数据库的支持代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GraphStoreFactory</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    Factory for creating MemoryGraph instances for different graph store providers.</span></span><br><span class="line"><span class="string">    Usage: GraphStoreFactory.create(provider_name, config)</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    provider_to_class = &#123;</span><br><span class="line">        <span class="string">&quot;memgraph&quot;</span>: <span class="string">&quot;mem0.memory.memgraph_memory.MemoryGraph&quot;</span>,</span><br><span class="line">        <span class="string">&quot;neptune&quot;</span>: <span class="string">&quot;mem0.graphs.neptune.neptunegraph.MemoryGraph&quot;</span>,</span><br><span class="line">        <span class="string">&quot;neptunedb&quot;</span>: <span class="string">&quot;mem0.graphs.neptune.neptunedb.MemoryGraph&quot;</span>,</span><br><span class="line">        <span class="string">&quot;kuzu&quot;</span>: <span class="string">&quot;mem0.memory.kuzu_memory.MemoryGraph&quot;</span>,</span><br><span class="line">        <span class="string">&quot;default&quot;</span>: <span class="string">&quot;mem0.memory.graph_memory.MemoryGraph&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create</span>(<span class="params">cls, provider_name, config</span>):</span><br><span class="line">        class_type = cls.provider_to_class.get(provider_name, cls.provider_to_class[<span class="string">&quot;default&quot;</span>])</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            GraphClass = load_class(class_type)</span><br><span class="line">        <span class="keyword">except</span> (ImportError, AttributeError) <span class="keyword">as</span> e:</span><br><span class="line">            <span class="keyword">raise</span> ImportError(<span class="string">f&quot;Could not import MemoryGraph for provider &#x27;<span class="subst">&#123;provider_name&#125;</span>&#x27;: <span class="subst">&#123;e&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> GraphClass(config)</span><br></pre></td></tr></table></figure>

<p>可以看到mem0支持4中图关系数据库memgraph、neptune、neptunedb、kuzu(为什么会放在两个不同文件夹下面呢？这个暂时还没看明白)，其它的LLM，embedding等等类似；</p>
<h4 id="1-2-add"><a href="#1-2-add" class="headerlink" title="1.2 add"></a>1.2 add</h4><p>这个函数是mem0的核心,主要通过两个子函数来实现</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">add</span>(<span class="params">self,</span></span><br><span class="line"><span class="params">        messages,</span></span><br><span class="line"><span class="params">        *,</span></span><br><span class="line"><span class="params">        user_id: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        agent_id: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        run_id: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        metadata: <span class="type">Optional</span>[<span class="type">Dict</span>[<span class="built_in">str</span>, <span class="type">Any</span>]] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        infer: <span class="built_in">bool</span> = <span class="literal">True</span>,</span></span><br><span class="line"><span class="params">        memory_type: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span></span><br><span class="line"><span class="params">        prompt: <span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span>,</span>):</span><br><span class="line">    <span class="keyword">with</span> concurrent.futures.ThreadPoolExecutor() <span class="keyword">as</span> executor:</span><br><span class="line">        <span class="comment"># 处理embedding相关的</span></span><br><span class="line">        future1 = executor.submit(<span class="variable language_">self</span>._add_to_vector_store, messages, processed_metadata, effective_filters, infer)</span><br><span class="line">        <span class="comment"># 图关系数据库  </span></span><br><span class="line">        future2 = executor.submit(<span class="variable language_">self</span>._add_to_graph, messages, effective_filters)</span><br><span class="line"></span><br><span class="line">        concurrent.futures.wait([future1, future2])</span><br><span class="line"></span><br><span class="line">        vector_store_result = future1.result()</span><br><span class="line">        graph_result = future2.result()</span><br></pre></td></tr></table></figure>

<p>而核心中的核心是_add_to_vector_store 这个函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 当 infer 为false时，是常规的记忆存储，embedding,入库 (直接入库的模式)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">_add_to_vector_store</span>(<span class="params">self, messages, metadata, filters, infer</span>):</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 当infer 为true时，将会使用LLM分析对话内容，提取有意义的事实，并智能地决定如何处理这些记忆（添加、更新、删除或保持不变）</span></span><br><span class="line">    <span class="comment">### 这里是提取实体关系的逻辑</span></span><br><span class="line">    parsed_messages = parse_messages(messages)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="variable language_">self</span>.config.custom_fact_extraction_prompt:</span><br><span class="line">        system_prompt = <span class="variable language_">self</span>.config.custom_fact_extraction_prompt</span><br><span class="line">        user_prompt = <span class="string">f&quot;Input:\n<span class="subst">&#123;parsed_messages&#125;</span>&quot;</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># Determine if this should use agent memory extraction based on agent_id presence</span></span><br><span class="line">        <span class="comment"># and role types in messages</span></span><br><span class="line">        is_agent_memory = <span class="variable language_">self</span>._should_use_agent_memory_extraction(messages, metadata)</span><br><span class="line">        system_prompt, user_prompt = get_fact_retrieval_messages(parsed_messages, is_agent_memory)</span><br><span class="line"></span><br><span class="line">    response = <span class="variable language_">self</span>.llm.generate_response(</span><br><span class="line">        messages=[</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;system&quot;</span>, <span class="string">&quot;content&quot;</span>: system_prompt&#125;,</span><br><span class="line">            &#123;<span class="string">&quot;role&quot;</span>: <span class="string">&quot;user&quot;</span>, <span class="string">&quot;content&quot;</span>: user_prompt&#125;,</span><br><span class="line">        ],</span><br><span class="line">        response_format=&#123;<span class="string">&quot;type&quot;</span>: <span class="string">&quot;json_object&quot;</span>&#125;,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 抽取实体后，开始进行判断下一步对记忆进行 增删改查的逻辑了，也是借助了大模型来实现</span></span><br><span class="line">    <span class="comment"># 这部分太长省略了</span></span><br></pre></td></tr></table></figure>

<p>可以观察一下mem0中抽取用户或者Agent 特性的提示词 (太长，只展示一部分，具体文件在：mem0&#x2F;configs&#x2F;prompts.py 里面的USER_MEMORY_EXTRACTION_PROMPT和AGENT_MEMORY_EXTRACTION_PROMPT)</p>
<p>首先，LLM主要任务是：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">AGENT_MEMORY_EXTRACTION_PROMPT = <span class="string">f&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">You are a Personal Information Organizer, specialized in accurately storing facts, user memories, and preferences. </span></span><br><span class="line"><span class="string">Your primary role is to extract relevant pieces of information from conversations and organize them into distinct, manageable facts. </span></span><br><span class="line"><span class="string">This allows for easy retrieval and personalization in future interactions. Below are the types of information you need to focus on and the detailed instructions on how to handle the input data.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># [IMPORTANT]: GENERATE FACTS SOLELY BASED ON THE USER&#x27;S MESSAGES. DO NOT INCLUDE INFORMATION FROM ASSISTANT OR SYSTEM MESSAGES.</span></span><br><span class="line"><span class="string"># [IMPORTANT]: YOU WILL BE PENALIZED IF YOU INCLUDE INFORMATION FROM ASSISTANT OR SYSTEM MESSAGES.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Types of Information to Remember:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1. Store Personal Preferences: Keep track of likes, dislikes, and specific preferences in various categories such as food, products, activities, and entertainment.</span></span><br><span class="line"><span class="string">2. Maintain Important Personal Details: Remember significant personal information like names, relationships, and important dates.</span></span><br><span class="line"><span class="string">3. Track Plans and Intentions: Note upcoming events, trips, goals, and any plans the user has shared.</span></span><br><span class="line"><span class="string">4. Remember Activity and Service Preferences: Recall preferences for dining, travel, hobbies, and other services.</span></span><br><span class="line"><span class="string">5. Monitor Health and Wellness Preferences: Keep a record of dietary restrictions, fitness routines, and other wellness-related information.</span></span><br><span class="line"><span class="string">6. Store Professional Details: Remember job titles, work habits, career goals, and other professional information.</span></span><br><span class="line"><span class="string">7. Miscellaneous Information Management: Keep track of favorite books, movies, brands, and other miscellaneous details that the user shares.</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>具体的few shot例子如下：给了一些正例和反例(不用提取的例子)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">AGENT_MEMORY_EXTRACTION_PROMPT = <span class="string">f&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">User: Hi.</span></span><br><span class="line"><span class="string">Assistant: Hello! I enjoy assisting you. How can I help today?</span></span><br><span class="line"><span class="string">Output: &#123;&#123;&quot;facts&quot; : []&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">User: There are branches in trees.</span></span><br><span class="line"><span class="string">Assistant: That&#x27;s an interesting observation. I love discussing nature.</span></span><br><span class="line"><span class="string">Output: &#123;&#123;&quot;facts&quot; : []&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">User: Hi, I am looking for a restaurant in San Francisco.</span></span><br><span class="line"><span class="string">Assistant: Sure, I can help with that. Any particular cuisine you&#x27;re interested in?</span></span><br><span class="line"><span class="string">Output: &#123;&#123;&quot;facts&quot; : [&quot;Looking for a restaurant in San Francisco&quot;]&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">User: Yesterday, I had a meeting with John at 3pm. We discussed the new project.</span></span><br><span class="line"><span class="string">Assistant: Sounds like a productive meeting. I&#x27;m always eager to hear about new projects.</span></span><br><span class="line"><span class="string">Output: &#123;&#123;&quot;facts&quot; : [&quot;Had a meeting with John at 3pm and discussed the new project&quot;]&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">User: Hi, my name is John. I am a software engineer.</span></span><br><span class="line"><span class="string">Assistant: Nice to meet you, John! My name is Alex and I admire software engineering. How can I help?</span></span><br><span class="line"><span class="string">Output: &#123;&#123;&quot;facts&quot; : [&quot;Name is John&quot;, &quot;Is a Software engineer&quot;]&#125;&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>不知道这种写法会不会限制LLM输出用户不想要的，prompt里面存在类似下面的句子：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># [IMPORTANT]: GENERATE FACTS SOLELY BASED ON THE USER&#x27;S MESSAGES. DO NOT INCLUDE INFORMATION FROM ASSISTANT OR SYSTEM MESSAGES.</span></span><br><span class="line"><span class="comment"># [IMPORTANT]: YOU WILL BE PENALIZED IF YOU INCLUDE INFORMATION FROM ASSISTANT OR SYSTEM MESSAGES.</span></span><br></pre></td></tr></table></figure>

<p>获取到哪些用户的习惯或者其它一些与用户相关信息之后，然后使用embedding匹配从memory中召回一些与这些信息相关的信息；具体的代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># new_retrieved_facts 即是从这条消息中获取到的用户偏好</span></span><br><span class="line"><span class="keyword">for</span> new_mem <span class="keyword">in</span> new_retrieved_facts:</span><br><span class="line">    messages_embeddings = <span class="variable language_">self</span>.embedding_model.embed(new_mem, <span class="string">&quot;add&quot;</span>)</span><br><span class="line">    new_message_embeddings[new_mem] = messages_embeddings</span><br><span class="line">    existing_memories = <span class="variable language_">self</span>.vector_store.search(</span><br><span class="line">        query=new_mem,</span><br><span class="line">        vectors=messages_embeddings,</span><br><span class="line">        limit=<span class="number">5</span>,</span><br><span class="line">        filters=search_filters,</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">for</span> mem <span class="keyword">in</span> existing_memories:</span><br><span class="line">        retrieved_old_memory.append(&#123;<span class="string">&quot;id&quot;</span>: mem.<span class="built_in">id</span>, <span class="string">&quot;text&quot;</span>: mem.payload.get(<span class="string">&quot;data&quot;</span>, <span class="string">&quot;&quot;</span>)&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>回溯到相关的历史memory之后，然后使用LLM确定是否添加新的记忆，还是删除更新旧的记忆，具体的职责相关prompt如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_UPDATE_MEMORY_PROMPT = <span class="string">&quot;&quot;&quot;You are a smart memory manager which controls the memory of a system.</span></span><br><span class="line"><span class="string">You can perform four operations: (1) add into the memory, (2) update the memory, (3) delete from the memory, and (4) no change.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Based on the above four operations, the memory will change.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Compare newly retrieved facts with the existing memory. For each new fact, decide whether to:</span></span><br><span class="line"><span class="string">- ADD: Add it to the memory as a new element</span></span><br><span class="line"><span class="string">- UPDATE: Update an existing memory element</span></span><br><span class="line"><span class="string">- DELETE: Delete an existing memory element</span></span><br><span class="line"><span class="string">- NONE: Make no change (if the fact is already present or irrelevant)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>few shot 的例子如下：展示的是删除这个操作的例子，完整的可以看mem0&#x2F;configs&#x2F;prompts.py 文件中的DEFAULT_UPDATE_MEMORY_PROMPT</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_UPDATE_MEMORY_PROMPT = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">There are specific guidelines to select which operation to perform:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3. **Delete**: If the retrieved facts contain information that contradicts the information present in the memory, then you have to delete it. Or if the direction is to delete the memory, then you have to delete it.</span></span><br><span class="line"><span class="string">Please note to return the IDs in the output from the input IDs only and do not generate any new ID.</span></span><br><span class="line"><span class="string">- **Example**:</span></span><br><span class="line"><span class="string">    - Old Memory:</span></span><br><span class="line"><span class="string">        [</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                &quot;id&quot; : &quot;0&quot;,</span></span><br><span class="line"><span class="string">                &quot;text&quot; : &quot;Name is John&quot;</span></span><br><span class="line"><span class="string">            &#125;,</span></span><br><span class="line"><span class="string">            &#123;</span></span><br><span class="line"><span class="string">                &quot;id&quot; : &quot;1&quot;,</span></span><br><span class="line"><span class="string">                &quot;text&quot; : &quot;Loves cheese pizza&quot;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">    - Retrieved facts: [&quot;Dislikes cheese pizza&quot;]</span></span><br><span class="line"><span class="string">    - New Memory:</span></span><br><span class="line"><span class="string">        &#123;</span></span><br><span class="line"><span class="string">        &quot;memory&quot; : [</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    &quot;id&quot; : &quot;0&quot;,</span></span><br><span class="line"><span class="string">                    &quot;text&quot; : &quot;Name is John&quot;,</span></span><br><span class="line"><span class="string">                    &quot;event&quot; : &quot;NONE&quot;</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                &#123;</span></span><br><span class="line"><span class="string">                    &quot;id&quot; : &quot;1&quot;,</span></span><br><span class="line"><span class="string">                    &quot;text&quot; : &quot;Loves cheese pizza&quot;,</span></span><br><span class="line"><span class="string">                    &quot;event&quot; : &quot;DELETE&quot;</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">        ]</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>        </span><br><span class="line"> </span><br></pre></td></tr></table></figure>



<h4 id="1-3-其它"><a href="#1-3-其它" class="headerlink" title="1.3 其它"></a>1.3 其它</h4><p>memory&#x2F;telemetry.py 文件，这个文件的作用类似埋点，用来记录用户使用mem0的数据情况（在gemini cli， qwen code中看到同样的文件）</p>
<h3 id="可参考资料"><a href="#可参考资料" class="headerlink" title="可参考资料"></a>可参考资料</h3><ol>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/1981536258447655069?share_code=AYr5nKZGh82b&utm_psn=1996328005497283929">mem0 源码阅读：一个工程化记忆系统</a></li>
</ol>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Agent/">Agent</a><a class="post-meta__tags" href="/tags/memory/">memory</a></div><div class="post-share"><div class="social-share" data-image="/covers/18.webp" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/12/08/LLM%E7%9A%84plan%E8%B0%83%E7%A0%94/" title="Agent是如何做Plan的？"><img class="cover" src="/covers/16.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Agent是如何做Plan的？</div></div><div class="info-2"><div class="info-item-1">对于agent的规划部分比较感兴趣，因此看了一下目前各个开源方案</div></div></div></a><a class="pagination-related" href="/2025/12/01/LLM-memory/" title="LLM memory"><img class="cover" src="/covers/15.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">LLM memory</div></div><div class="info-2"><div class="info-item-1">LLM memory 综合文档记录</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/12/01/LLM-memory/" title="LLM memory"><img class="cover" src="/covers/15.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-01</div><div class="info-item-2">LLM memory</div></div><div class="info-2"><div class="info-item-1">LLM memory 综合文档记录</div></div></div></a><a class="pagination-related" href="/2025/12/11/27.Agent/" title="Agent"><img class="cover" src="/covers/27.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-11</div><div class="info-item-2">Agent</div></div><div class="info-2"><div class="info-item-1">Agent相关paper，知识持续跟进</div></div></div></a><a class="pagination-related" href="/2026/01/22/31-Agent-Sandbox/" title="Agent Sandbox"><img class="cover" src="/covers/31.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-22</div><div class="info-item-2">Agent Sandbox</div></div><div class="info-2"><div class="info-item-1">记录Agent Sandbox相关的技术</div></div></div></a><a class="pagination-related" href="/2025/11/25/AgentScope%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" title="AgentScope源码学习"><img class="cover" src="/covers/8.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-25</div><div class="info-item-2">AgentScope源码学习</div></div><div class="info-2"><div class="info-item-1">开源项目AgentScope源码学习记录</div></div></div></a><a class="pagination-related" href="/2025/12/08/LLM%E7%9A%84plan%E8%B0%83%E7%A0%94/" title="Agent是如何做Plan的？"><img class="cover" src="/covers/16.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">Agent是如何做Plan的？</div></div><div class="info-2"><div class="info-item-1">对于agent的规划部分比较感兴趣，因此看了一下目前各个开源方案</div></div></div></a><a class="pagination-related" href="/2025/04/08/langgraph%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%E5%AD%A6%E4%B9%A0/" title="langgraph官方文档学习"><img class="cover" src="/covers/13.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-04-08</div><div class="info-item-2">langgraph官方文档学习</div></div><div class="info-2"><div class="info-item-1">长期不使用langgraph，导致又忘记了，写个blog记录一下，方面快速回顾</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">why join the navy if you can be a pirate</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81"><span class="toc-text">1. 项目的核心代码</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-search"><span class="toc-text">1.1 search</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-add"><span class="toc-text">1.2 add</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%85%B6%E5%AE%83"><span class="toc-text">1.3 其它</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"><span class="toc-text">可参考资料</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/02/03/36-crewai%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/" title="crewai源码学习">crewai源码学习</a><time datetime="2026-02-03T03:07:51.000Z" title="发表于 2026-02-03 11:07:51">2026-02-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/26/35-%E5%A4%A7%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86%E9%83%A8%E7%BD%B2/" title="大模型推理部署">大模型推理部署</a><time datetime="2026-01-26T02:17:21.000Z" title="发表于 2026-01-26 10:17:21">2026-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/26/34-%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86-tensorRT/" title="模型推理基本知识-tensorRT">模型推理基本知识-tensorRT</a><time datetime="2026-01-26T02:14:09.000Z" title="发表于 2026-01-26 10:14:09">2026-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/26/33-%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86-CUDA/" title="模型推理基本知识-CUDA">模型推理基本知识-CUDA</a><time datetime="2026-01-26T02:13:33.000Z" title="发表于 2026-01-26 10:13:33">2026-01-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/26/32-%E6%A8%A1%E5%9E%8B%E6%8E%A8%E7%90%86%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86-%E9%87%8F%E5%8C%96/" title="模型推理基本知识-量化">模型推理基本知识-量化</a><time datetime="2026-01-26T02:06:59.000Z" title="发表于 2026-01-26 10:06:59">2026-01-26</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.2"></script><script src="/js/main.js?v=5.5.2"></script><div class="js-pjax"></div><img src="/img/fengmian.webp" alt="" style="position:absolute;width:0;height:0;opacity:0;pointer-events:none;" loading="eager" fetchpriority="high" onload="this.style.display='none'"></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>